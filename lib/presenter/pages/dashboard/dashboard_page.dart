import 'package:flutter/material.dart';import 'package:flutter_svg/flutter_svg.dart';import 'package:google_fonts/google_fonts.dart';import 'package:provider/provider.dart';import 'package:texnomart_clone_flutter/data/source/local/hive_helper.dart';import 'package:texnomart_clone_flutter/presenter/pages/profile/profile_page.dart';import '../basket/basket_page.dart';import '../catalog/catalog_page.dart';import '../favourite/favourite_page.dart';import '../home/home_page.dart';class DashboardPage extends StatefulWidget {  final int currentPage;  const DashboardPage({super.key, required this.currentPage});  @override  State<DashboardPage> createState() => _DashboardPageState();}class _DashboardPageState extends State<DashboardPage> {  String? basketLength =      HiveHelper.getAllProductsFromBasket().length.toString();  String? favouriteLength =      HiveHelper.getAllFavouriteProducts().length.toString();  final PageStorageBucket bucket = PageStorageBucket();  int currentTab = 0;  Widget currentScreen = const HomePage();  final List<Widget> screens = [    const HomePage(),    const CatalogPage(),    const BasketPage(),    const FavouritePage(),    const ProfilePage()  ];  @override  void initState() {    currentTab = widget.currentPage;    currentTab == 2 ? currentScreen = const BasketPage() : const HomePage();    currentTab == 1 ? currentScreen = const CatalogPage() : const HomePage();    super.initState();  }  @override  void dispose() {    super.dispose();  }  @override  Widget build(BuildContext context) {    return Scaffold(      body: PageStorage(        bucket: bucket,        child: currentScreen,      ),      bottomNavigationBar: Container(        height: 60,        decoration: const BoxDecoration(          color: Colors.white,          borderRadius: BorderRadius.only(            topLeft: Radius.circular(20),            topRight: Radius.circular(20),          ),        ),        child: SingleChildScrollView(            scrollDirection: Axis.horizontal,            child: Row(              mainAxisAlignment: MainAxisAlignment.spaceAround,              children: [                MaterialButton(                  highlightColor: const Color(0xFFfbc100).withAlpha(60),                  splashColor: const Color(0xFFfbc100).withAlpha(60),                  onPressed: () {                    setState(() {                      currentScreen = screens[0];                      currentTab = 0;                      favouriteLength = HiveHelper.getAllFavouriteProducts()                          .length                          .toString();                    });                  },                  child: Column(                    mainAxisAlignment: MainAxisAlignment.center,                    children: [                      SvgPicture.asset(                        'assets/icons/ic_home.svg',                        height: 17,                        width: MediaQuery.of(context).size.width / 4,                        color: currentTab == 0                            ? const Color(0xFFfbc100)                            : const Color(0xFF7D7D7D),                      ),                      const SizedBox(height: 7),                      Text(                        'Bosh sahifa',                        style: GoogleFonts.ubuntu(                          color: currentTab == 0                              ? const Color(0xFFfbc100)                              : const Color(0xFF7D7D7D),                          fontSize: 7,                          fontWeight: FontWeight.w500,                          height: 1.2,                        ),                      )                    ],                  ),                ),                MaterialButton(                  highlightColor: const Color(0xFFfbc100).withAlpha(60),                  splashColor: const Color(0xFFfbc100).withAlpha(60),                  onPressed: () {                    setState(() {                      currentScreen = screens[1];                      currentTab = 1;                      favouriteLength = HiveHelper.getAllFavouriteProducts()                          .length                          .toString();                    });                  },                  child: Column(                    mainAxisAlignment: MainAxisAlignment.center,                    children: [                      SvgPicture.asset(                        'assets/icons/ic_category.svg',                        height: 24,                        width: MediaQuery.of(context).size.width / 4,                        color: currentTab == 1                            ? const Color(0xFFfbc100)                            : const Color(0xFF7D7D7D),                      ),                      const SizedBox(height: 7),                      Text(                        'Katalog',                        style: GoogleFonts.ubuntu(                          color: currentTab == 1                              ? const Color(0xFFfbc100)                              : const Color(0xFF7D7D7D),                          fontSize: 7,                          fontWeight: FontWeight.w500,                          height: 1.2,                        ),                      )                    ],                  ),                ),                MaterialButton(                  highlightColor: const Color(0xFFfbc100).withAlpha(60),                  splashColor: const Color(0xFFfbc100).withAlpha(60),                  onPressed: () {                    setState(() {                      currentScreen = screens[2];                      currentTab = 2;                      favouriteLength = HiveHelper.getAllFavouriteProducts()                          .length                          .toString();                    });                  },                  child: Column(                    mainAxisAlignment: MainAxisAlignment.center,                    children: [                      Row(                        children: [                          SvgPicture.asset(                            'assets/icons/ic_basket.svg',                            height: 24,                            width: MediaQuery.of(context).size.width / 4,                            color: currentTab == 2                                ? const Color(0xFFfbc100)                                : const Color(0xFF7D7D7D),                          ),                          Container(                            child: Center(                                child: Text(                              basketLength ?? "",                              style: TextStyle(color: Colors.black),                            )),                            decoration: BoxDecoration(                              borderRadius: BorderRadius.circular(16),                              color: Colors.yellow,                            ),                            height: 18,                            width: 18,                          ),                        ],                      ),                      const SizedBox(height: 7),                      Text(                        'Savatcha',                        style: GoogleFonts.ubuntu(                          color: currentTab == 2                              ? const Color(0xFFfbc100)                              : const Color(0xFF7D7D7D),                          fontSize: 7,                          fontWeight: FontWeight.w500,                          height: 1.2,                        ),                      )                    ],                  ),                ),                MaterialButton(                  highlightColor: const Color(0xFFfbc100).withAlpha(60),                  splashColor: const Color(0xFFfbc100).withAlpha(60),                  onPressed: () {                    setState(() {                      currentScreen = screens[3];                      currentTab = 3;                      favouriteLength = HiveHelper.getAllFavouriteProducts()                          .length                          .toString();                    });                  },                  child: Column(                    mainAxisAlignment: MainAxisAlignment.center,                    children: [                      Row(                        children: [                          SvgPicture.asset(                            'assets/icons/ic_favourite.svg',                            height: 24,                            width: MediaQuery.of(context).size.width / 4,                            color: currentTab == 3                                ? const Color(0xFFfbc100)                                : const Color(0xFF7D7D7D),                          ),                          Container(                            child: Center(                                child: Text(                              favouriteLength ?? "",                              style: TextStyle(color: Colors.black),                            )),                            decoration: BoxDecoration(                              borderRadius: BorderRadius.circular(16),                              color: Colors.yellow,                            ),                            height: 18,                            width: 18,                          ),                        ],                      ),                      const SizedBox(height: 7),                      Text(                        'Sevimlilar',                        style: GoogleFonts.ubuntu(                          color: currentTab == 3                              ? const Color(0xFFfbc100)                              : const Color(0xFF7D7D7D),                          fontSize: 7,                          fontWeight: FontWeight.w500,                          height: 1.2,                        ),                      )                    ],                  ),                ),                MaterialButton(                  highlightColor: const Color(0xFFfbc100).withAlpha(60),                  splashColor: const Color(0xFFfbc100).withAlpha(60),                  onPressed: () {                    setState(() {                      currentScreen = screens[4];                      currentTab = 4;                      favouriteLength = HiveHelper.getAllFavouriteProducts()                          .length                          .toString();                    });                  },                  child: Column(                    mainAxisAlignment: MainAxisAlignment.center,                    children: [                      Row(                        children: [                          Icon(Icons.person,                              size: 24,                              color: currentTab == 4                                  ? const Color(0xFFfbc100)                                  : const Color(0xFF7D7D7D)),                        ],                      ),                      const SizedBox(height: 7),                      Text(                        'Profil',                        style: GoogleFonts.ubuntu(                          color: currentTab == 4                              ? const Color(0xFFfbc100)                              : const Color(0xFF7D7D7D),                          fontSize: 7,                          fontWeight: FontWeight.w500,                          height: 1.2,                        ),                      )                    ],                  ),                ),              ],            )),      ),    );  }}